<form class="layui-form layui-box" style='padding:25px 30px 20px 0' action="__SELF__" data-auto="true" method="post">



    <div class="layui-form-item">
        <label class="layui-form-label">电台名称</label>
        <div class="layui-input-block">
            <input type="text" name="name" value='{$vo.name|default=""}' required="required" title="请输入名称" placeholder="请输入名称" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">选择省市区</label>
        <div class="layui-input-block">
                <select id="country" name="country" class="layui-select " style='display:inline-block;'>
                    <option value="">选择国家</option>
                    <!--{if $countrys!="" }-->
                    <!--{foreach $countrys as $v}-->
                    <!--{if $v.code==$country}-->
                    <option selected="selected" value='{$v.code}'>{$v.name}</option>
                    <!--{else}-->
                    <option value='{$v.code}'>{$v.name}</option>
                    <!--{/if}-->
                    <!--{/foreach}-->

                    <!--{/if}-->
                </select>
                <select id="province" name="province" class="layui-select " style='display:inline-block;'>
                    <option value="">选择省份</option>
                    <!--{if $provinces!="" }-->
                    <!--{foreach $provinces as $v}-->
                    <!--{if $v.code==$province}-->
                    <option selected="selected" value='{$v.code}'>{$v.name}</option>
                    <!--{else}-->
                    <option value='{$v.code}'>{$v.name}</option>
                    <!--{/if}-->
                    <!--{/foreach}-->
                    <!--{/if}-->
                </select>
                <select  id="city" name="city" class="layui-select " style='display:inline-block;'>
                    <option value="">选择城市</option>
                    <!--{if $citys!="" }-->
                    <!--{foreach $citys as $v}-->
                    <!--{if $v.code==$city}-->
                    <option selected="selected" value='{$v.code}'>{$v.name}</option>
                    <!--{else}-->
                    <option value='{$v.code}'>{$v.name}</option>
                    <!--{/if}-->
                    <!--{/foreach}-->
                    <!--{/if}-->
                </select>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">电台属性</label>
        <div class="layui-input-block" >

            <input {if isset($vo['is_new']) && $vo['is_new']=='1'}checked{/if} class="list-check-box"  type='checkbox' name="is_new" style="display: inline-block;"/>最新
            <input {if isset($vo['is_hot']) && $vo['is_hot']=='1'}checked{/if} class="list-check-box"  type='checkbox' name="is_hot" style="display: inline-block;"/>热门
            <input {if isset($vo['is_recommend']) && $vo['is_recommend']=='1'}checked{/if} class="list-check-box"  type='checkbox' name="is_recommend" style="display: inline-block;"/>推荐

        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">选择类型</label>
        <div class="layui-input-block">
            <!---->
            <!--{foreach $channels as $v}-->

            {if isset($vo['type_ids'])}
            <input {in name='$v.id' value='$vo.type_ids' }checked{else/}{/in}  class="list-check-box" value='{$v.id}' type='checkbox' name="type_ids[]" style="display: inline-block;"/>{$v.name}

            {else}
            <input  class="list-check-box" value='{$v.id}' type='checkbox' name="type_ids[]" style="display: inline-block;"/>{$v.name}

            {/if}




            <!--{/foreach}-->


        </div>
    </div>



    <div class="layui-form-item">
        <label class="layui-form-label">源地址1</label>
        <div class="layui-input-block">
            <input type="text" name="url_1" value='{$vo.url_1|default=""}' required="required" title="请输入url_1" placeholder="请输入url_1" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">源地址2</label>
        <div class="layui-input-block">
                <input type="text" name="url_2" value='{$vo.url_2|default=""}' required="required" title="请输入url_2" placeholder="请输入url_2" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">源地址3</label>
        <div class="layui-input-block">
            <input type="text" name="url_3" value='{$vo.url_3|default=""}' required="required" title="请输入url_3" placeholder="请输入url_3" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">关键词</label>
        <div class="layui-input-block">
            <input type="text" name="keyword" value='{$vo.keyword|default=""}'  title="请输入关键词" placeholder="请输入关键词" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">描述</label>
        <div class="layui-input-block">
            <textarea name="context" class="layui-input" style="height:80px;resize:none;line-height:20px">{$vo.context|default=""}</textarea>
        </div>
    </div>



    <div class="layui-form-item">
        <label class="layui-form-label">图标</label>
        <div class="layui-input-block">
            <div style="position:relative">
                <div class="uploadimage"><input name="icon" type="hidden" value='{$vo.icon|default=""}'></div>
                <a data-file="one" data-field="icon" data-type="png,jpg,jpeg" data-uptype="local" href="javascript:void(0)" class="uploadbutton">上传图片</a>
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">封面图片</label>
        <div class="layui-input-block">
            <div style="position:relative">
                <div class="uploadimage"><input name="bg" type="hidden" value='{$vo.bg|default=""}'></div>
                <a data-file="one" data-field="bg" data-type="png,jpg,jpeg" data-uptype="local" href="javascript:void(0)" class="uploadbutton">上传图片</a>
            </div>
        </div>
    </div>

    <div class="layui-form-item text-center">
        {if isset($vo['id'])}<input type='hidden' value='{$vo.id}' name='id'/>{/if}
        <button class="layui-btn" type='submit'>保存数据</button>
        <button class="layui-btn layui-btn-danger" type='button' data-confirm="确定要取消编辑吗？" data-close>取消编辑</button>
    </div>

</form>

<script>

    require(['jquery'], function () {
        $('[name="icon"]').on('change', function () {
            $(this).parent().attr('data-tips-image', this.value).css('backgroundImage', 'url(' + this.value + ')');
        });
        $('[name="bg"]').on('change', function () {
            $(this).parent().attr('data-tips-image', this.value).css('backgroundImage', 'url(' + this.value + ')');
        });
    });

    $(function() {
        $('body').off('change', 'select[name=country]').on('change', 'select[name=country]', function () {
            var value = $(this).val();

            var prov = $("#province");
            var city = $("#city");

            if(value.length>0){
                $.ajax({
                    url: "{:url(\"$classuri/getchildregion\")}?parentCode="+value,
                    data: {},
                    type: 'get',
                    dataType: 'json',
                    success: function(data) {
                        //alert(data1)
                        var _html = '<option value="" >选择省份</option>';
                        $.each(data, function(k, v){
                            _html += '<option value="' + v.code + '" >' + v.name + '</option>';
                        });
                        prov.html(_html);
                    }
                });
            }else{
                prov.html('<option value="" >选择省份</option>');
                city.html('<option value="" >选择城市</option>');
            }



        });

        $('body').off('change', 'select[name=province]').on('change', 'select[name=province]', function () {
            var value = $(this).val();
            var city = $("#city");

            if(value.length>0){
                $.ajax({
                    url: "{:url(\"$classuri/getchildregion\")}?parentCode="+value,
                    data: {},
                    type: 'get',
                    dataType: 'json',
                    success: function(data) {
                        //alert(data1)
                        var _html = '<option value="" >选择城市</option>';
                        $.each(data, function(k, v){
                            _html += '<option value="' + v.code + '" >' + v.name + '</option>';
                        });
                        city.html(_html);
                    }
                });
            }else{
                city.html('<option value="" >选择城市</option>');

            }



        });
    });
</script>