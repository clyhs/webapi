<form class="layui-form layui-box" style='padding:25px 30px 20px 0' action="__SELF__" data-auto="true" method="post">

    <div class="layui-form-item">
        <label class="layui-form-label">选择省市区</label>
        <div class="layui-input-block">
            <select id="country" name="country" class="layui-select " style='display:inline-block;'>
                <option value="">选择国家</option>
                <!--{if $countrys!="" }-->
                <!--{foreach $countrys as $v}-->
                <!--{if $v.code==$country}-->
                <option selected="selected" value='{$v.code}'>{$v.name}</option>
                <!--{else}-->
                <option value='{$v.code}'>{$v.name}</option>
                <!--{/if}-->
                <!--{/foreach}-->

                <!--{/if}-->
            </select>
            <select id="province" name="province" class="layui-select " style='display:inline-block;'>
                <option value="">选择省份</option>
                <!--{if $provinces!="" }-->
                <!--{foreach $provinces as $v}-->
                <!--{if $v.code==$province}-->
                <option selected="selected" value='{$v.code}'>{$v.name}</option>
                <!--{else}-->
                <option value='{$v.code}'>{$v.name}</option>
                <!--{/if}-->
                <!--{/foreach}-->
                <!--{/if}-->
            </select>
            <select  id="city" name="city" class="layui-select " style='display:inline-block;'>
                <option value="">选择城市</option>
                <!--{if $citys!="" }-->
                <!--{foreach $citys as $v}-->
                <!--{if $v.code==$city}-->
                <option selected="selected" value='{$v.code}'>{$v.name}</option>
                <!--{else}-->
                <option value='{$v.code}'>{$v.name}</option>
                <!--{/if}-->
                <!--{/foreach}-->
                <!--{/if}-->
            </select>
        </div>
    </div>

</form>
<script>
    

    $(function() {
        $('body').off('change', 'select[name=country]').on('change', 'select[name=country]', function () {
            var value = $(this).val();

            var prov = $("#province");
            var city = $("#city");

            if(value.length>0){
                $.ajax({
                    url: "{:url(\"$classuri/getchildregion\")}?parentCode="+value,
                    data: {},
                    type: 'get',
                    dataType: 'json',
                    success: function(data) {
                        //alert(data1)
                        var _html = '<option value="" >选择省份</option>';
                        $.each(data, function(k, v){
                            _html += '<option value="' + v.code + '" >' + v.name + '</option>';
                        });
                        prov.html(_html);
                    }
                });
            }else{
                prov.html('<option value="" >选择省份</option>');
                city.html('<option value="" >选择城市</option>');
            }



        });

        $('body').off('change', 'select[name=province]').on('change', 'select[name=province]', function () {
            var value = $(this).val();
            var city = $("#city");

            if(value.length>0){
                $.ajax({
                    url: "{:url(\"$classuri/getchildregion\")}?parentCode="+value,
                    data: {},
                    type: 'get',
                    dataType: 'json',
                    success: function(data) {
                        //alert(data1)
                        var _html = '<option value="" >选择城市</option>';
                        $.each(data, function(k, v){
                            _html += '<option value="' + v.code + '" >' + v.name + '</option>';
                        });
                        city.html(_html);
                    }
                });
            }else{
                city.html('<option value="" >选择城市</option>');

            }



        });
    });
</script>